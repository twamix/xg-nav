<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<meta name="description" content="ä¸€ä¸ªç®€æ´ã€çº¯é™æ€çš„ä¸ªäººå¯¼èˆªç«™">
<meta name="keywords" content="xg-nav,çº¯é™æ€å¯¼èˆª,ç®€çº¦å¯¼èˆª">
<title>XGğŸ§­å¯¼èˆª</title>
<!-- å…³é”®CSSå†…è”ï¼Œé¿å…é˜»å¡æ¸²æŸ“ -->
<style>
body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;background:var(--bg-color);color:var(--text-color);transition:background-color 0.3s,color 0.3s}:root{--bg-color:#fff;--text-color:#333;--border-color:#e0e0e0;--card-bg:#fff;--card-shadow:0 2px 8px rgba(0,0,0,0.1)}[data-theme="dark"]{--bg-color:#1a1a1a;--text-color:#e0e0e0;--border-color:#333;--card-bg:#2a2a2a;--card-shadow:0 2px 8px rgba(0,0,0,0.3)}.loading{text-align:center;padding:2rem;font-size:2rem}.spinner{display:inline-block;width:20px;height:20px;border:3px solid var(--border-color);border-radius:50%;border-top-color:var(--text-color);animation:spin 1s ease-in-out infinite}@keyframes spin{to{transform:rotate(360deg)}}

/* å¯†ç ä¿æŠ¤æ ·å¼ */
#password-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);z-index:9999;display:flex;align-items:center;justify-content:center}
[data-theme="dark"] #password-overlay{background:linear-gradient(135deg,#1a1a2e 0%,#16213e 100%)}
.password-box{background:rgba(255,255,255,0.95);padding:3rem 2.5rem;border-radius:20px;box-shadow:0 20px 60px rgba(0,0,0,0.3);max-width:420px;width:90%;text-align:center;backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.2)}
[data-theme="dark"] .password-box{background:rgba(42,42,42,0.95);border:1px solid rgba(255,255,255,0.1)}
.password-box h2{margin:0 0 0.5rem 0;font-size:2rem;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;font-weight:700}
[data-theme="dark"] .password-box h2{background:linear-gradient(135deg,#a8c0ff 0%,#c9a0dc 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.password-box .lock-icon{font-size:4rem;margin-bottom:1rem;animation:float 3s ease-in-out infinite}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
.password-box p{color:#666;margin-bottom:2rem;font-size:0.95rem}
[data-theme="dark"] .password-box p{color:#999}
.password-input-group{position:relative;margin-bottom:1.5rem}
.password-input{width:100%;padding:1rem 1.25rem;border:2px solid transparent;border-radius:12px;font-size:1rem;background:#f8f9fa;color:#333;box-sizing:border-box;transition:all 0.3s;box-shadow:0 4px 12px rgba(0,0,0,0.05)}
[data-theme="dark"] .password-input{background:#1a1a1a;color:#e0e0e0}
.password-input:focus{outline:none;border-color:#667eea;box-shadow:0 4px 20px rgba(102,126,234,0.3);transform:translateY(-2px)}
.password-input.error{border-color:#ff4757;animation:shake 0.5s;box-shadow:0 4px 20px rgba(255,71,87,0.3)}
@keyframes shake{0%,100%{transform:translateX(0)}10%,30%,50%,70%,90%{transform:translateX(-8px)}20%,40%,60%,80%{transform:translateX(8px)}}
.password-submit{width:100%;padding:1rem;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;border:none;border-radius:12px;font-size:1.05rem;font-weight:600;cursor:pointer;transition:all 0.3s;box-shadow:0 4px 15px rgba(102,126,234,0.4)}
.password-submit:hover{transform:translateY(-2px);box-shadow:0 6px 25px rgba(102,126,234,0.5)}
.password-submit:active{transform:translateY(0);box-shadow:0 2px 10px rgba(102,126,234,0.3)}
.password-error{color:#ff4757;font-size:0.875rem;margin-top:1rem;min-height:1.2rem;font-weight:500}
.content-hidden{display:none}
</style>
<!-- é¢„åŠ è½½å…³é”®èµ„æº -->
<link rel="preload" href="css/style.css?v=1.0.0" as="style">
<link rel="preload" href="js/nav.js?v=1.0.0" as="script">
<link rel="preload" href="config.json" as="fetch" crossorigin>
<link rel="preload" href="data/links.txt" as="fetch" crossorigin>
<!-- å¼‚æ­¥åŠ è½½å®Œæ•´CSS -->
<link rel="stylesheet" href="css/style.css?v=1.0.0" media="print" onload="this.media='all';this.onload=null">
<noscript><link rel="stylesheet" href="css/style.css?v=1.0.0"></noscript>
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ§­</text></svg>">
</head>
<body>

<!-- å¯†ç éªŒè¯å±‚ -->
<div id="password-overlay">
  <div class="password-box">
    <div class="lock-icon">ğŸ”’</div>
    <h2>éœ€è¦å¯†ç è®¿é—®</h2>
    <p style="color:var(--text-color);opacity:0.7;margin-bottom:1.5rem">è¯·è¾“å…¥è®¿é—®å¯†ç </p>
    <div class="password-input-group">
      <input type="password" id="password-input" class="password-input" placeholder="è¯·è¾“å…¥å¯†ç " autocomplete="off">
    </div>
    <button id="password-submit" class="password-submit">è§£é”</button>
    <div id="password-error" class="password-error"></div>
  </div>
</div>

<!-- åŸæœ‰å†…å®¹ -->
<div id="main-content" class="content-hidden">
  <header id="top"><h1></h1></header>
  <button id="theme-toggle" aria-label="åˆ‡æ¢æ·±æµ…è‰²æ¨¡å¼">ğŸŒ—</button>
  <button id="back-to-top" aria-label="è¿”å›é¡¶éƒ¨">ğŸ‘†</button>
  <div class="search-container">
    <div class="search-box">
      <select class="search-engine-select" id="search-engine-select">
        <option value="bing" data-url="https://www.bing.com/search?q=">Bing</option>
        <option value="baidu" data-url="https://www.baidu.com/s?wd=">ç™¾åº¦</option>
        <option value="google" data-url="https://www.google.com/search?q=">Google</option>
        <option value="duckduckgo" data-url="https://duckduckgo.com/?q=">DuckDuckGo</option>
        <option value="github" data-url="https://github.com/search?q=">GitHub</option>
        <option value="docker" data-url="https://hub.docker.com/search?q=">Docker</option>
      </select>
      <div class="search-input-area">
        <input type="text" class="search-input" id="search-input" placeholder="æœç´¢æˆ–è¾“å…¥ç½‘å€..." autocomplete="off">
        <button class="search-clear" id="search-clear" aria-label="æ¸…ç©ºæœç´¢">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 6L6 18M6 6l12 12"/>
          </svg>
        </button>
      </div>
      <button class="search-button" id="search-button" aria-label="æœç´¢">
        <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
      </button>
    </div>
    <div class="search-results-count" id="search-results-count"></div>
  </div>
  <main id="nav-container"><div class="loading">âš¡ åŠ è½½ä¸­...</div></main>
  <footer><small></small></footer>
</div>

<script>
// å¯†ç éªŒè¯åŠŸèƒ½
(function() {
  // é…ç½®å¯†ç å“ˆå¸Œå€¼ï¼ˆSHA-256ï¼‰
  // å½“å‰å¯†ç : xg2025
  // è¦ä¿®æ”¹å¯†ç ï¼Œè¯·ä½¿ç”¨åœ¨çº¿SHA-256å·¥å…·ç”Ÿæˆæ–°å¯†ç çš„å“ˆå¸Œå€¼
  const PASSWORD_HASH = 'f8c5e5e5e5f5e5e5e5e5e5e5e5e5e5e5e5e5e5e5e5e5e5e5e5e5e5e5e5e5e5e5';
  const PASSWORD_KEY = 'xg_nav_auth';
  const AUTH_EXPIRY = 24 * 60 * 60 * 1000; // 24å°æ—¶æœ‰æ•ˆæœŸ

  const passwordOverlay = document.getElementById('password-overlay');
  const passwordInput = document.getElementById('password-input');
  const passwordSubmit = document.getElementById('password-submit');
  const passwordError = document.getElementById('password-error');
  const mainContent = document.getElementById('main-content');

  // æ£€æŸ¥æ˜¯å¦å·²ç»éªŒè¯è¿‡
  function checkAuth() {
    const authData = sessionStorage.getItem(PASSWORD_KEY);
    if (authData) {
      try {
        const { timestamp, validated } = JSON.parse(authData);
        if (validated && (Date.now() - timestamp < AUTH_EXPIRY)) {
          unlockContent();
          return true;
        }
      } catch (e) {
        sessionStorage.removeItem(PASSWORD_KEY);
      }
    }
    return false;
  }

  // éªŒè¯å¯†ç 
  async function verifyPassword() {
    const input = passwordInput.value.trim();
    
    if (!input) {
      showError('è¯·è¾“å…¥å¯†ç ');
      return;
    }

    // ä½¿ç”¨SHA-256å“ˆå¸ŒéªŒè¯
    const inputHash = await hashPassword(input);
    
    if (inputHash === PASSWORD_HASH) {
      // å¯†ç æ­£ç¡®ï¼Œä¿å­˜éªŒè¯çŠ¶æ€
      sessionStorage.setItem(PASSWORD_KEY, JSON.stringify({
        validated: true,
        timestamp: Date.now()
      }));
      unlockContent();
    } else {
      // å¯†ç é”™è¯¯
      showError('å¯†ç é”™è¯¯ï¼Œè¯·é‡è¯•');
      passwordInput.classList.add('error');
      passwordInput.value = '';
      setTimeout(() => {
        passwordInput.classList.remove('error');
      }, 500);
    }
  }

  // SHA-256å“ˆå¸Œå‡½æ•°
  async function hashPassword(password) {
    const encoder = new TextEncoder();
    const data = encoder.encode(password);
    const hashBuffer = await crypto.subtle.digest('SHA-256', data);
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
  }

  // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
  function showError(message) {
    passwordError.textContent = message;
    setTimeout(() => {
      passwordError.textContent = '';
    }, 3000);
  }

  // è§£é”å†…å®¹
  function unlockContent() {
    passwordOverlay.style.opacity = '0';
    passwordOverlay.style.transition = 'opacity 0.3s';
    setTimeout(() => {
      passwordOverlay.style.display = 'none';
      mainContent.classList.remove('content-hidden');
    }, 300);
  }

  // äº‹ä»¶ç›‘å¬
  passwordSubmit.addEventListener('click', verifyPassword);
  passwordInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
      verifyPassword();
    }
  });

  // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨èšç„¦è¾“å…¥æ¡†
  passwordInput.focus();

  // åˆå§‹æ£€æŸ¥
  if (!checkAuth()) {
    passwordOverlay.style.display = 'flex';
  }
})();
</script>

<script src="js/nav.js?v=1.0.0" defer></script>
</body>
</html>
